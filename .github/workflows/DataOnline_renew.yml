name: Data Online æ‰§è¡Œé‡å¯

on:
  # å®šæ—¶ä»»åŠ¡ - æ¯6å°æ—¶è¿è¡Œä¸€æ¬¡
  # schedule:
  #  - cron: '0 */6 * * *'
  # æ‰‹åŠ¨è§¦å‘
  workflow_dispatch:

jobs:
  æ‰§è¡Œç»ˆç«¯å‘½ä»¤:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    
    steps:
      - name: æ‹‰å–ä»£ç ä»“åº“
        uses: actions/checkout@v4
      
      - name: é…ç½® Python ç¯å¢ƒ
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      
      - name: å®‰è£…ä¾èµ–
        run: |
          echo "ğŸ“¦ æ­£åœ¨å®‰è£…ä¾èµ–..."
          pip install playwright httpx
          echo "ğŸŒ æ­£åœ¨å®‰è£… Chromium æµè§ˆå™¨..."
          playwright install chromium
          playwright install-deps chromium
          echo "âœ… ä¾èµ–å®‰è£…å®Œæˆ"
      
      - name: æ‰§è¡Œç»ˆç«¯è„šæœ¬
        env:
          DATA_USERNAME: ${{ secrets.DATA_USERNAME }}
          DATA_PASSWORD: ${{ secrets.DATA_PASSWORD }}
          TG_BOT_TOKEN: ${{ secrets.TG_BOT_TOKEN }}
          TG_CHAT_ID: ${{ secrets.TG_CHAT_ID }}
        run: |
          echo "ğŸš€ å¼€å§‹æ‰§è¡Œè„šæœ¬..."
          python terminal_script.py
